<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <!-- Bulma -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.2/css/bulma.min.css">

    <!-- vis -->
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
</head>

<body>
    <section class="section">
        <div class="container">
            <div class="box">
                <figure class="image is-16by9">
                    <div id="mynetwork" class="has-ratio"></div>
                </figure>
            </div>
        </div>
    </section>

    <script type="text/javascript">

        // Parse url
        const params = new URLSearchParams(location.search);

        // Load the script which contains the nodes
        const script = document.createElement("script");
        script.type = "application/javascript";
        script.src = params.get('name') + '.js';
        script.onload = createNetwork
        document.head.appendChild(script);  
        
        // Create the graph
        function createNetwork() {
            // create a network
            const container = document.getElementById('mynetwork');
        
            // provide the data in the vis format
            const data = {
                nodes: nodes,
                edges: edges
            };
            const options = {
                edges:{
                    arrows: 'to'
                },
                physics: {
                    forceAtlas2Based: {
                        gravitationalConstant: -26,
                        centralGravity: 0.005,
                        springLength: 230,
                        springConstant: 0.18,
                        avoidOverlap: 1.5
                    },
                    maxVelocity: 146,
                    solver: 'forceAtlas2Based',
                    timestep: 0.35,
                    stabilization: {
                        enabled: true,
                        iterations: 1000,
                        updateInterval: 25
                    }
                }   
            };
        
            // initialize your network!
            const network = new vis.Network(container, data, options);
        
            network.on("stabilizationIterationsDone", function () {
                network.setOptions( { physics: false } );
            }); 
        }
    </script>
</body>
</html>
